<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <style type="text/css">
      .charts {
        min-height: 800px;
      }
      .chart_left {
        float: left;
        width: 200px;
        height: 600px;
        margin-left: 20px;
      }
      .chart_item {
        margin-top: 50px;
      }
      .chart_list {
        height: 50px;
        line-height: 50px;
        margin-top: 4px;
        text-align: center;
        font-size: 18px;
        cursor: pointer;
      }
      .chart_list--current,
      .chart_list:hover {
        color: #fff;
        background: #31c27c;
      }
      .chart_right {
        float: right;
        width: 940px;
        height: 800px;
      }
      .chart_content_list {
        height: 60px;
        line-height: 60px;
        font-size: 0;
      }
      .chart_content_list span {
        float: left;
        font-size: 15px;
      }
      .num {
        width: 100px;
        height: 60px;
        font-style: italic;
        text-align: center;
      }
      .song {
        width: 360px;
        height: 60px;
      }
      .singer {
        width: 150px;
        height: 60px;
        text-align: left;
      }
      .ablum {
        width: 160px;
        height: 60px;
        margin-right: 20px;
        overflow: hidden;
      }
      .time {
        width: 120px;
        height: 60px;
        text-align: left;
      }
    </style>
  </head>
  <body>
    <% include ./public/header.html %>

    <div class="subnav">
      <ul class="subnav_item">
        <li class="subnav_list"><a class="subnav_link" href="/">首页</a></li>
        <li class="subnav_list"><a class="subnav_link" href="/singerList">歌手</a></li>
        <li class="subnav_list"><a class="subnav_link subnav_link--current" href="/chart">排行榜</a></li>
        <li class="subnav_list"><a class="subnav_link" href="/billboard">打榜</a></li>
      </ul>
    </div>

    <div class="main">
      <div class="charts">
        <div class="chart_left">
          <ul class="chart_item">
            <li class="chart_list chart_list--current">总榜</li>
            <li class="chart_list">华语</li>
            <li class="chart_list">日韩</li>
            <li class="chart_list">欧美</li>
          </ul>
        </div>
        <div class="chart_right">
          <li class="chart_content_list">
            <span class="num"></span>
            <span class="song">歌曲</span>
            <span class="singer">歌手</span>
            <span class="ablum">专辑</span>
            <span class="time">时长</span>
          </li>
          <ul class="chart_content_item">
          </ul>
        </div>
      </div>
    </div>

    <% include ./public/footer.html %>

    <script src="javascripts/jquery.js" type="text/javascript"></script>
    <script src="javascripts/main.js"></script>
    <script>
      $.ajax({
        url: '/charts?type=总榜',
        type: 'GET',
        success: function (data) {
          create(data);
        }
      })
      $('.chart_list').click(function () {
        $('.chart_list').removeClass('chart_list--current');
        $(this).addClass('chart_list--current');

        $.ajax({
          url: '/charts?type='+$(this).html(),
          type: 'GET',
          success: function (data) {
            create(data);
          }
        });
      });
      function create(data) {
        $('.chart_content_item').empty();

        for (var i = 0; i < 10; i++) {
          var node = $('<li class="chart_content_list"></li>');
          var node_num = $('<span class="num">i</span>');
          var node_song = $('<span class="song"></span>');
          var node_song_a = $('<a class="chart_content_link"></a>');
          var node_singer = $('<span class="singer"></span>');
          var node_singer_a = $('<a></a>');
          var node_ablum = $('<span class="ablum"></span>');
          var node_ablum_a = $('<a></a>');
          var node_time = $('<span class="time"></span>');

          node_num.html(i+1);
          node_song_a.attr('href', '/player?musicName=' + data[i].musicName + '&singerName=' + data[i].singerName);
          node_song_a.html(data[i].musicName);
          node_singer_a.attr('href', '/singer?singerName='+data[i].singerName);
          node_singer_a.html(data[i].singerName);
          node_ablum_a.attr('href', '');
          node_ablum_a.html(data[i].cdName);
          node_time.html(data[i].time);

          node.append(node_num);
          node.append(node_song);
          node_song.append(node_song_a);
          node.append(node_singer);
          node_singer.append(node_singer_a);
          node.append(node_ablum);
          node_ablum.append(node_ablum_a);
          node.append(node_time);

          $('.chart_content_item').append(node);
        }
      }
    </script>
  </body>
</html>
